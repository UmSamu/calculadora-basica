<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="tela">
        <div class="calculadora-board">
            <div class="calculadora-titulo">
                <span>CALCULADORA</span>
            </div>
            <div class="calculadora-conteudo">
                <div class="calculadora-superior">
                    <input id="inputCalculadora" onkeydown="handleKeyPress(event)">
                </div>
                <div class="calculadora-inferior">
                    <div class="teclado-esquerdo">
                        <div class="teclado-linha">
                            <div class="tecla tecla-linha"><span onclick="inserirValor(7)">7</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(8)">8</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(9)">9</span></div>
                        </div>
                        <div class="teclado-linha">
                            <div class="tecla tecla-linha"><span onclick="inserirValor(4)">4</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(5)">5</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(6)">6</span></div>
                        </div>
                        <div class="teclado-linha">
                            <div class="tecla tecla-linha"><span onclick="inserirValor(1)">1</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(2)">2</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor(3)">3</span></div>
                        </div>
                        <div class="teclado-linha">
                            <div class="tecla tecla-linha zero"><span onclick="inserirValor(0)">0</span></div>
                            <div class="tecla tecla-linha"><span onclick="inserirValor('.')">.</span></div>
                        </div>
                    </div>

                    <div class="teclado-direito">
                        <div class="teclado-coluna">
                            <div class="tecla tecla-coluna ce"><span onclick="limparContaAtual()">CE</span></div>
                            <div class="tecla tecla-coluna"><span onclick="inserirValor('*')">*</span></div>
                            <div class="tecla tecla-coluna mais"><span onclick="inserirValor('+')">+</span></div>
                        </div>
                        <div class="teclado-coluna">
                            <div class="tecla tecla-coluna c"><span onclick="limparTudo()">C</span></div>
                            <div class="tecla tecla-coluna"><span onclick="inserirValor('/')">/</span></div>
                            <div class="tecla tecla-coluna"><span onclick="inserirValor('-')">-</span></div>
                            <div class="tecla tecla-coluna"><span onclick="calcularValor()">=</span></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="historico-board">
            <div class="historico-titulo">
                <span>HISTÓRICO</span>
            </div>
            <div class="historico-conteudo" id="historico-conteudo">
            </div>
        </div>
    </div>

    <script>
        const input = document.getElementById("inputCalculadora");
        const historico = document.getElementById("historico-conteudo");

        semHistorico()

        function inserirValor(valor) {
            let valorAtual = input.value;

            if (["+", "-", "*", "/"].includes(valor)) {
                valorAtual += ` ${valor} `;
            } else {
                valorAtual += valor;
            }

            input.value = valorAtual;
        }

        function calcularValor() {
            let valorAntigo = input.value;

            let valorAtual = eval(valorAntigo);
            input.value = valorAtual;

            if (historico.children.length === 1 && historico.children[0].classList.contains("sem-historico")) {
                historico.innerHTML = "";
            }

            const historicoItem = document.createElement("div");
            historicoItem.classList.add("card");
            historicoItem.innerHTML = `
                <div class="horario"><span>${getCurrentDateTime()}</span></div>
                <div class="historico-calculo">${valorAntigo} =<br> ${input.value}</div>
            `;

            historico.appendChild(historicoItem);
        }

        function getCurrentDateTime() {
            const now = new Date();
            // const date = now.toLocaleDateString("pt-BR", { day: "2-digit", month: "2-digit", year: "numeric" });
            const time = now.toLocaleTimeString("pt-BR", { hour: "2-digit", minute: "2-digit", hour12: false });

            return `${time}`;
        }

        function handleKeyPress(event) {
            if (event.keyCode === 13) {
                calcularValor();
            }
        }

        function limparTudo() {
            input.value = "";
            historico.innerHTML = "";
        }

        function limparContaAtual() {
            input.value = "";
        }

        function semHistorico() {
            historico.innerHTML = "<div class='sem-historico'>Nenhum cálculo realizado :(</div>";
        }
    </script>
</body>

</html>